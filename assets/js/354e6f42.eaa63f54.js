"use strict";(self.webpackChunksfggv_78282=self.webpackChunksfggv_78282||[]).push([[1341],{3905:(n,e,t)=>{t.d(e,{Zo:()=>c,kt:()=>m});var i=t(7294);function o(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,i)}return t}function r(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?a(Object(t),!0).forEach((function(e){o(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function l(n,e){if(null==n)return{};var t,i,o=function(n,e){if(null==n)return{};var t,i,o={},a=Object.keys(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)>=0||(o[t]=n[t]);return o}(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}var s=i.createContext({}),d=function(n){var e=i.useContext(s),t=e;return n&&(t="function"==typeof n?n(e):r(r({},e),n)),t},c=function(n){var e=d(n.components);return i.createElement(s.Provider,{value:e},n.children)},u="mdxType",b={inlineCode:"code",wrapper:function(n){var e=n.children;return i.createElement(i.Fragment,{},e)}},p=i.forwardRef((function(n,e){var t=n.components,o=n.mdxType,a=n.originalType,s=n.parentName,c=l(n,["components","mdxType","originalType","parentName"]),u=d(t),p=o,m=u["".concat(s,".").concat(p)]||u[p]||b[p]||a;return t?i.createElement(m,r(r({ref:e},c),{},{components:t})):i.createElement(m,r({ref:e},c))}));function m(n,e){var t=arguments,o=e&&e.mdxType;if("string"==typeof n||o){var a=t.length,r=new Array(a);r[0]=p;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=n,l[u]="string"==typeof n?n:o,r[1]=l;for(var d=2;d<a;d++)r[d]=t[d];return i.createElement.apply(null,r)}return i.createElement.apply(null,t)}p.displayName="MDXCreateElement"},8196:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>s,contentTitle:()=>r,default:()=>b,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var i=t(7462),o=(t(7294),t(3905));const a={sidebar_position:1},r="Qb-core installation",l={unversionedId:"Trunks/qb-core-installation",id:"Trunks/qb-core-installation",title:"Qb-core installation",description:"qb-ambulancejob and qb-policejob has to be edited before using sf-trunks.",source:"@site/docs/Trunks/qb-core-installation.md",sourceDirName:"Trunks",slug:"/Trunks/qb-core-installation",permalink:"/docs/Trunks/qb-core-installation",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"docs",previous:{title:"Events",permalink:"/docs/Trunks/events"},next:{title:"State Bags",permalink:"/docs/Trunks/statebags"}},s={},d=[{value:"qb-ambulancejob",id:"qb-ambulancejob",level:2},{value:"qb-policejob",id:"qb-policejob",level:2}],c={toc:d},u="wrapper";function b(n){let{components:e,...t}=n;return(0,o.kt)(u,(0,i.Z)({},c,t,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"qb-core-installation"},"Qb-core installation"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"qb-ambulancejob")," and ",(0,o.kt)("strong",{parentName:"p"},"qb-policejob")," has to be edited before using ",(0,o.kt)("inlineCode",{parentName:"p"},"sf-trunks"),".\nWithout it animations will be bugged."),(0,o.kt)("admonition",{type:"warning"},(0,o.kt)("p",{parentName:"admonition"},"Remember! Create a backup before editing files of your existing resources!")),(0,o.kt)("h2",{id:"qb-ambulancejob"},"qb-ambulancejob"),(0,o.kt)("p",null,"You have to remove everything under line 123 in ",(0,o.kt)("inlineCode",{parentName:"p"},"client/dead.lua")," and replace it with that: "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="client/dead.lua:123"',title:'"client/dead.lua:123"'},'emsNotified = false\n\nlocal isInTrunk = false\nAddEventHandler("sf-trunks:isUsingCamera", function(state)\n    isInTrunk = state\nend)\n\nCreateThread(function()\n    while true do\n        local sleep = 1000\n        if isDead or InLaststand then\n            sleep = 5\n            local ped = PlayerPedId()\n            DisableAllControlActions(0)\n            EnableControlAction(0, 1, true)\n            EnableControlAction(0, 2, true)\n            EnableControlAction(0, 245, true)\n            EnableControlAction(0, 38, true)\n            EnableControlAction(0, 0, true)\n            EnableControlAction(0, 322, true)\n            EnableControlAction(0, 288, true)\n            EnableControlAction(0, 213, true)\n            EnableControlAction(0, 249, true)\n            EnableControlAction(0, 46, true)\n            EnableControlAction(0, 47, true)\n\n            if isDead then\n                if not isInHospitalBed then\n                    if deathTime > 0 then\n                        DrawTxt(0.93, 1.44, 1.0,1.0,0.6, Lang:t(\'info.respawn_txt\', {deathtime = math.ceil(deathTime)}), 255, 255, 255, 255)\n                    else\n                        DrawTxt(0.865, 1.44, 1.0, 1.0, 0.6, Lang:t(\'info.respawn_revive\', {holdtime = hold, cost = Config.BillCost}), 255, 255, 255, 255)\n                    end\n                end\n\n                if not isInTrunk then\n                    if IsPedInAnyVehicle(ped, false) then\n                        loadAnimDict("veh@low@front_ps@idle_duck")\n                        if not IsEntityPlayingAnim(ped, "veh@low@front_ps@idle_duck", "sit", 3) then\n                            TaskPlayAnim(ped, "veh@low@front_ps@idle_duck", "sit", 1.0, 1.0, -1, 1, 0, 0, 0, 0)\n                        end\n                    else\n                        if isInHospitalBed then\n                            if not IsEntityPlayingAnim(ped, inBedDict, inBedAnim, 3) then\n                                loadAnimDict(inBedDict)\n                                TaskPlayAnim(ped, inBedDict, inBedAnim, 1.0, 1.0, -1, 1, 0, 0, 0, 0)\n                            end\n                        else\n                            if not IsEntityPlayingAnim(ped, deadAnimDict, deadAnim, 3) then\n                                loadAnimDict(deadAnimDict)\n                                TaskPlayAnim(ped, deadAnimDict, deadAnim, 1.0, 1.0, -1, 1, 0, 0, 0, 0)\n                            end\n                        end\n                    end\n                end\n\n                SetCurrentPedWeapon(ped, `WEAPON_UNARMED`, true)\n            elseif InLaststand then\n                sleep = 5\n\n                if LaststandTime > Config.MinimumRevive then\n                    DrawTxt(0.94, 1.44, 1.0, 1.0, 0.6, Lang:t(\'info.bleed_out\', {time = math.ceil(LaststandTime)}), 255, 255, 255, 255)\n                else\n                    DrawTxt(0.845, 1.44, 1.0, 1.0, 0.6, Lang:t(\'info.bleed_out_help\', {time = math.ceil(LaststandTime)}), 255, 255, 255, 255)\n                    if not emsNotified then\n                        DrawTxt(0.91, 1.40, 1.0, 1.0, 0.6, Lang:t(\'info.request_help\'), 255, 255, 255, 255)\n                    else\n                        DrawTxt(0.90, 1.40, 1.0, 1.0, 0.6, Lang:t(\'info.help_requested\'), 255, 255, 255, 255)\n                    end\n\n                    if IsControlJustPressed(0, 47) and not emsNotified then\n                        TriggerServerEvent(\'hospital:server:ambulanceAlert\', Lang:t(\'info.civ_down\'))\n                        emsNotified = true\n                    end\n                end\n\n                if not isInTrunk then\n                    if not isEscorted then\n                        if IsPedInAnyVehicle(ped, false) then\n                            loadAnimDict("veh@low@front_ps@idle_duck")\n                            if not IsEntityPlayingAnim(ped, "veh@low@front_ps@idle_duck", "sit", 3) then\n                                TaskPlayAnim(ped, "veh@low@front_ps@idle_duck", "sit", 1.0, 1.0, -1, 1, 0, 0, 0, 0)\n                            end\n                        else\n                            loadAnimDict(lastStandDict)\n                            if not IsEntityPlayingAnim(ped, lastStandDict, lastStandAnim, 3) then\n                                TaskPlayAnim(ped, lastStandDict, lastStandAnim, 1.0, 1.0, -1, 1, 0, 0, 0, 0)\n                            end\n                        end\n                    else\n                        if IsPedInAnyVehicle(ped, false) then\n                            loadAnimDict("veh@low@front_ps@idle_duck")\n                            if IsEntityPlayingAnim(ped, "veh@low@front_ps@idle_duck", "sit", 3) then\n                                StopAnimTask(ped, "veh@low@front_ps@idle_duck", "sit", 3)\n                            end\n                        else\n                            loadAnimDict(lastStandDict)\n                            if IsEntityPlayingAnim(ped, lastStandDict, lastStandAnim, 3) then\n                                StopAnimTask(ped, lastStandDict, lastStandAnim, 3)\n                            end\n                        end\n                    end\n                end\n            end\n        end\n        Wait(sleep)\n    end\nend)\n')),(0,o.kt)("h2",{id:"qb-policejob"},"qb-policejob"),(0,o.kt)("p",null,"You have to remove everything under line 401 in ",(0,o.kt)("inlineCode",{parentName:"p"},"client/interactions.lua")," and replace it with that: "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="client/interactions.lua:401"',title:'"client/interactions.lua:401"'},'local isInTrunk = false\nAddEventHandler("sf-trunks:isUsingCamera", function(state)\n    isInTrunk = state\nend)\n\n-- Threads\nCreateThread(function()\n    while true do\n        Wait(1)\n        if isEscorted then\n            DisableAllControlActions(0)\n            EnableControlAction(0, 1, true)\n            EnableControlAction(0, 2, true)\n            EnableControlAction(0, 245, true)\n            EnableControlAction(0, 38, true)\n            EnableControlAction(0, 322, true)\n            EnableControlAction(0, 249, true)\n            EnableControlAction(0, 46, true)\n        end\n\n        if isHandcuffed then\n            DisableControlAction(0, 24, true) -- Attack\n            DisableControlAction(0, 257, true) -- Attack 2\n            DisableControlAction(0, 25, true) -- Aim\n            DisableControlAction(0, 263, true) -- Melee Attack 1\n\n            DisableControlAction(0, 45, true) -- Reload\n            DisableControlAction(0, 22, true) -- Jump\n            DisableControlAction(0, 44, true) -- Cover\n            DisableControlAction(0, 37, true) -- Select Weapon\n            DisableControlAction(0, 23, true) -- Also \'enter\'?\n\n            DisableControlAction(0, 288, true) -- Disable phone\n            DisableControlAction(0, 289, true) -- Inventory\n            DisableControlAction(0, 170, true) -- Animations\n            DisableControlAction(0, 167, true) -- Job\n\n            DisableControlAction(0, 26, true) -- Disable looking behind\n            DisableControlAction(0, 73, true) -- Disable clearing animation\n            DisableControlAction(2, 199, true) -- Disable pause screen\n\n            DisableControlAction(0, 59, true) -- Disable steering in vehicle\n            DisableControlAction(0, 71, true) -- Disable driving forward in vehicle\n            DisableControlAction(0, 72, true) -- Disable reversing in vehicle\n\n            DisableControlAction(2, 36, true) -- Disable going stealth\n\n            DisableControlAction(0, 264, true) -- Disable melee\n            DisableControlAction(0, 257, true) -- Disable melee\n            DisableControlAction(0, 140, true) -- Disable melee\n            DisableControlAction(0, 141, true) -- Disable melee\n            DisableControlAction(0, 142, true) -- Disable melee\n            DisableControlAction(0, 143, true) -- Disable melee\n            DisableControlAction(0, 75, true)  -- Disable exit vehicle\n            DisableControlAction(27, 75, true) -- Disable exit vehicle\n            EnableControlAction(0, 249, true) -- Added for talking while cuffed\n            EnableControlAction(0, 46, true)  -- Added for talking while cuffed\n\n            if not isInTrunk and (not IsEntityPlayingAnim(PlayerPedId(), "mp_arresting", "idle", 3) and not IsEntityPlayingAnim(PlayerPedId(), "mp_arrest_paired", "crook_p2_back_right", 3)) and not QBCore.Functions.GetPlayerData().metadata["isdead"] then\n                loadAnimDict("mp_arresting")\n                TaskPlayAnim(PlayerPedId(), "mp_arresting", "idle", 8.0, -8, -1, cuffType, 0, 0, 0, 0)\n            end\n        end\n        if not isHandcuffed and not isEscorted then\n            Wait(2000)\n        end\n    end\nend)\n')))}b.isMDXComponent=!0}}]);